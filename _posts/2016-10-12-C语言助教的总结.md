title: C 语言助教的总结 
comments: true
excerpt: "C"
date:   2016-10-12 +2327
categories: lecture
---


1. ANSI C 与 C99

`ANSI C` 是最早的相对严格的C语言标准，是默认的编译选项。
`C99` 是后来的标准，对C语言进行了修正和拓展，现在广为使用。

举例说，对于 ANSI C，你只能
```c
int i;
for (i = 0; i < N, i++)...
```

然而C99可以

```c
for (int i = 0; i < N, i++)...
```

此类差异还有很多，但是大多不需要记忆，用到了再说。

2. 格式化输出

输出10进制数字:

`float` 用 `%f`

`double` 用 `%f` 或者 `%lf` (后者是c99标准)

`long double` 用 `%Lf`

`char`, `short`, `int` 用 `%d` (可以认为发生了类型提升，char,short 统一为 int)

`long` 用 `%ld`

`long long`用 `%lld`


3. int 在 C 中的特殊内涵

由于早期设计的原因，很多东西都围绕 `int`，这种东西一直影响到后来。

让我们回顾一下几十年前人们的设计思路：

`int` 在早期设计的时候，被钦点为一种“最常用的整数”，是系统基本整数运算指令直接支持（意思是能够同样快处理的最长的整数类型，使用它显然性价比最高）的整数。这样有个显著的好处是可以尽可能利用系统资源。

以`int`为中心，不比 `int` 长的整数类型叫 `short`, 不比 `int` 短的整数类型叫 `long`。因此有 `sizeof(short) <= sizeof(int) <= sizeof(long)`。使用 short 的目的往往是为了节省空间（因为它不比int算的快），使用long的目的是为了存放更大的数（因为它计算比int慢）。

`char` 是用于辅助存放 ASCII 和单个字节为目的整数，大小恒定为 256。没有比 `char` 占空间更小的数据类型。

然后ANSI C里面规定不写返回类型的函数返回值都是`int`，还有整数运算期间`char` `short`的类型被提升为 `int`，都可见`int` 的中心地位。

虽然在当时看来这套方案很完美，但是当32位系统到来的时候却造成了很大的问题：此时按照这个思路，`int` 和 `long` 的大小都要翻一倍！


